# Warning: all values are run with eval()!
#
# Unit convention: all values carrying physical units must be specified carrying units.
#   GOOD: resistor = 50 * Ohm
#   BAD:  resistor = 50         This is not just bad style, but will actually fail to do what you want,
#                               as the number representing 1 Ohm resistance internally is not 1.
# If you specify a count of something (number of samples, digitizer counts...),
# please indicate what is being counted using a comment.
#   GOOD: min_s2_width = 50 #Samples
#   BAD:  min_s2_width = 50

[DEFAULT]

digitizer_t_resolution = 10 * ns
plugin_paths = []
config = ""
picklefile = "data.pklz"
num_pmts = 242 #Pmts
tpc_name = "XENON100"

[MongoDB.MongoDBInput]
database = "output"
collection = "dataset"
address = "145.102.135.218:27017"

[XED.XedInput]
filename = "xe100_120402_2000_000000.xed"

[OnlineMonitor.OnlineMonitor]
address = "xedaq00"
database= "online"
collection= "monitor"
waveformcollection="waveforms"

[Root.WriteToROOTFile]
rootfile = 'test.root'

[DSP.BuildUncorrectedSumWaveformForXerawdpMatching]
#AAAAAAAAAARRRRRRRRRRRRRRRGGGGGGGGGGHHHHHHHHH
digitizer_voltage_range = 2.25 * V

digitizer_bits = 14 #bits
pmt_circuit_load_resistor = 50 * Ohm
external_amplification = 10

[DSP.JoinAndConvertWaveforms]
digitizer_voltage_range = 2.25 * V

digitizer_bits = 14 #bits
pmt_circuit_load_resistor = 50 * Ohm
external_amplification = 10

# A few of these gains are zero. It is assumed this was done intentionally;
# we won't consider signals in these channels at all.
# (JoinAndConvertWaveforms does not put them in channel_waveforms)
gains = {   0: 2715400, 1: 2875650, 2: 1941550, 3: 2068200, 4: 1886150,
            5: 1868400, 6: 2152300, 7: 1906050, 8: 0, 9: 2055000,
            10: 1930250, 11: 0, 12: 1965000, 13: 2111900, 14: 2169650,
            15: 2219450, 16: 2096400, 17: 2097900, 18: 2108850, 19: 2092000,
            20: 1989150, 21: 2040950, 22: 1637300, 23: 1945750, 24: 2170050,
            25: 2192580, 26: 1982450, 27: 1942100, 28: 2237050, 29: 2152150,
            30: 2222250, 31: 2216050, 32: 1335300, 33: 2068850, 34: 2079500,
            35: 2141900, 36: 2046050, 37: 2008500, 38: 0, 39: 2060950,
            40: 1943350, 41: 1855350, 42: 2057200, 43: 2000850, 44: 1934950,
            45: 2178750, 46: 2024650, 47: 2068700, 48: 2155750, 49: 2110050,
            50: 2144400, 51: 1941400, 52: 2114150, 53: 2051850, 54: 2215000,
            55: 2081950, 56: 2165650, 57: 0, 58: 2260550, 59: 2156850,
            60: 2048350, 61: 2087100, 62: 1966400, 63: 2221700, 64: 2099600,
            65: 2133950, 66: 2048450, 67: 2146666, 68: 2206800, 69: 2231100,
            70: 2145450, 71: 2231700, 72: 2199000, 73: 2051600, 74: 1968400,
            75: 2069050, 76: 1978400, 77: 1949900, 78: 2088250, 79: 2228600,
            80: 2172150, 81: 1985350, 82: 2095200, 83: 1955900, 84: 1883350,
            85: 1978250, 86: 2121750, 87: 1836000, 88: 2123250, 89: 2026111,
            90: 2272600, 91: 2215750, 92: 2152050, 93: 1915650, 94: 1877750,
            95: 2345450, 96: 2164900, 97: 1954600, 98: 1856200, 99: 0,
            100: 1957500, 101: 2281000, 102: 1999400, 103: 1909750, 104: 0,
            105: 1732550, 106: 2112500, 107: 1915900, 108: 2013850, 109: 2123900,
            110: 1961950, 111: 1821350, 112: 1899500, 113: 1808000, 114: 2129950,
            115: 2012450, 116: 1941950, 117: 2053850, 118: 2005100, 119: 1991250,
            120: 1830500, 121: 1952150, 122: 2002750, 123: 2108100, 124: 1940100,
            125: 1954250, 126: 1969100, 127: 2188000, 128: 2142850, 129: 2057600,
            130: 2209300, 131: 2144350, 132: 2033300, 133: 1932400, 134: 1966950,
            135: 1973500, 136: 1897850, 137: 2088700, 138: 1663000, 139: 2242900,
            140: 1717450, 141: 1956350, 142: 1894600, 143: 1898050, 144: 1677300,
            145: 1996350, 146: 1811250, 147: 1672200, 148: 1890050, 149: 2103400,
            150: 1672650, 151: 1969150, 152: 2161000, 153: 1774550, 154: 1932550,
            155: 1813000, 156: 1938070, 157: 2020900, 158: 2047600, 159: 1821350,
            160: 1791450, 161: 1720900, 162: 2051950, 163: 1903850, 164: 1801900,
            165: 1995750, 166: 1550250, 167: 1200800, 168: 1896100, 169: 2005250,
            170: 2022750, 171: 1835500, 172: 1922250, 173: 1948900, 174: 2090300,
            175: 1910550, 176: 0, 177: 1831350, 178: 2012100, 179: 2074300,
            180: 2502050, 181: 1339200, 182: 1814200, 183: 1895530, 184: 1975050,
            185: 2047850, 186: 1946850, 187: 2144300, 188: 2000100, 189: 2017750,
            190: 0, 191: 1942150, 192: 2117550, 193: 1529950, 194: 0,
            195: 1923750, 196: 1749050, 197: 1940300, 198: 1971950, 199: 1919150,
            200: 1888400, 201: 2184450, 202: 2163800, 203: 1983700, 204: 2010900,
            205: 2055700, 206: 1984900, 207: 2045150, 208: 2132550, 209: 1791500,
            210: 2050600, 211: 2000600, 212: 2039950, 213: 1831400, 214: 2035350,
            215: 1759010, 216: 2062300, 217: 2111100, 218: 1945900, 219: 1973750,
            220: 2177800, 221: 1914600, 222: 1981400, 223: 0, 224: 1994150,
            225: 2069750, 226: 2201250, 227: 2069300, 228: 1964850, 229: 1938750,
            230: 1972100, 231: 1869500, 232: 1995650, 233: 2149150, 234: 0,
            235: 2113400, 236: 1804800, 237: 1921700, 238: 1805550, 239: 1898200,
            240: 1893470, 241: 1901400,  }

[DSP.ComputeSumWaveform]
# Remember python range does not include endpoint!
# Remember python3 range does not return a list;
# have to encapsulate it in set() to be able to | these
# Could have used list and +, but easier to subtract excluded pmts this way
# This is pretty arcane python stuff to put in a config file...!
pmts_top    = set(range(1,  98  +1))
pmts_bottom = set(range(99, 178 +1))
pmts_veto   = set(range(179,242 +1))

# The PMTs below are excluded when peakfinding, but not for anything else.
# For example, signals in these channels do contribute to the area of peaks.
# The only way to fully disable a channel is to set its gain to 0.
#
# TEMP for XerawDP matching: we need the uncorrected waveform for peakfinding,
# which is only available in JoinAndConvertWaveforms, so it is computed there.
# This setting is currently unused, instead it is hardcoded in JoinAndConvertWaveforms!
pmts_excluded_from_peakfinding = [1, 2, 145, 148, 157, 171, 177]


[PosSimple.PosRecWeightedSum]
# positions of PMTs in top array for XENON100. Taken from xerawdp source code
topArrayMap  =       {0: {'y': 0.0, 'x': -166.8}, 1: {'y': 34.7, 'x': -163.2}, 
		      2: {'y': 67.9, 'x': -152.4}, 3: {'y': 98.1, 'x': -135.0}, 
		      4: {'y': 124.0, 'x': -111.6}, 5: {'y': 144.5, 'x': -83.4}, 
		      6: {'y': 158.7, 'x': -51.6}, 7: {'y': 165.9, 'x': -17.4}, 
		      8: {'y': 165.9, 'x': 17.4}, 9: {'y': 158.7, 'x': 51.6}, 
		      10: {'y': 144.5, 'x': 83.4}, 11: {'y': 124.0, 'x': 111.6}, 
		      12: {'y': 98.1, 'x': 135.0}, 13: {'y': 67.9, 'x': 152.4}, 
		      14: {'y': 34.7, 'x': 163.2}, 15: {'y': 0.0, 'x': 166.8}, 
		      16: {'y': -34.7, 'x': 163.2}, 17: {'y': -67.9, 'x': 152.4}, 
		      18: {'y': -98.1, 'x': 135.0}, 19: {'y': -124.0, 'x': 111.6}, 
		      20: {'y': -144.5, 'x': 83.4}, 21: {'y': -158.7, 'x': 51.6}, 
		      22: {'y': -165.9, 'x': 17.4}, 23: {'y': -165.9, 'x': -17.4}, 
		      24: {'y': -158.7, 'x': -51.6}, 25: {'y': -144.5, 'x': -83.4}, 
		      26: {'y': -124.0, 'x': -111.6}, 27: {'y': -98.1, 'x': -135.0}, 
		      28: {'y': -67.9, 'x': -152.4}, 29: {'y': -34.7, 'x': -163.2}, 
		      30: {'y': 0.0, 'x': -136.5}, 31: {'y': 35.3, 'x': -131.9}, 
		      32: {'y': 68.3, 'x': -118.2}, 33: {'y': 96.5, 'x': -96.5}, 
		      34: {'y': 118.2, 'x': -68.3}, 35: {'y': 131.9, 'x': -35.3}, 
		      36: {'y': 136.5, 'x': -0.0}, 37: {'y': 131.9, 'x': 35.3}, 
		      38: {'y': 118.2, 'x': 68.3}, 39: {'y': 96.5, 'x': 96.5}, 
		      40: {'y': 68.3, 'x': 118.2}, 41: {'y': 35.3, 'x': 131.9}, 
		      42: {'y': 0.0, 'x': 136.5}, 43: {'y': -35.3, 'x': 131.9}, 
		      44: {'y': -68.3, 'x': 118.2}, 45: {'y': -96.5, 'x': 96.5}, 
		      46: {'y': -118.2, 'x': 68.3}, 47: {'y': -131.9, 'x': 35.3}, 
		      48: {'y': -136.5, 'x': 0.0}, 49: {'y': -131.9, 'x': -35.3}, 
		      50: {'y': -118.2, 'x': -68.3}, 51: {'y': -96.5, 'x': -96.5}, 
		      52: {'y': -68.3, 'x': -118.0}, 53: {'y': -35.3, 'x': -131.0}, 
		      54: {'y': 0.0, 'x': -106.0}, 55: {'y': 32.8, 'x': -101.0}, 
		      56: {'y': 62.4, 'x': -85.9}, 57: {'y': 85.9, 'x': -62.4}, 
		      58: {'y': 101.0, 'x': -32.8}, 59: {'y': 106.2, 'x': -0.0}, 
		      60: {'y': 101.0, 'x': 32.8}, 61: {'y': 85.9, 'x': 62.4}, 
		      62: {'y': 62.4, 'x': 85.9}, 63: {'y': 32.8, 'x': 101.0}, 
		      64: {'y': 0.0, 'x': 106.2}, 65: {'y': -32.8, 'x': 101.0}, 
		      66: {'y': -62.4, 'x': 85.9}, 67: {'y': -85.9, 'x': 62.4}, 
		      68: {'y': -101.0, 'x': 32.8}, 69: {'y': -106.2, 'x': 0.0}, 
		      70: {'y': -101.0, 'x': -32.8}, 71: {'y': -85.9, 'x': -62.4}, 
		      72: {'y': -62.4, 'x': -85.9}, 73: {'y': -32.8, 'x': -101.0}, 
		      74: {'y': 0.0, 'x': -75.9}, 75: {'y': 32.9, 'x': -68.4}, 
		      76: {'y': 59.3, 'x': -47.3}, 77: {'y': 74.0, 'x': -16.9}, 
		      78: {'y': 74.0, 'x': 16.9}, 79: {'y': 59.3, 'x': 47.3}, 
		      80: {'y': 32.9, 'x': 68.4}, 81: {'y': 0.0, 'x': 75.9}, 
		      82: {'y': -32.9, 'x': 68.4}, 83: {'y': -59.3, 'x': 47.3}, 
		      84: {'y': -74.0, 'x': 16.9}, 85: {'y': -74.0, 'x': -16.9}, 
		      86: {'y': -59.3, 'x': -47.3}, 87: {'y': -32.9, 'x': -68.4}, 
		      88: {'y': 0.0, 'x': -45.0}, 89: {'y': 30.0, 'x': -30.0}, 
		      90: {'y': 45.0, 'x': 0.0}, 91: {'y': 30.0, 'x': 30.0}, 
		      92: {'y': 0.0, 'x': 45.0}, 93: {'y': -30.0, 'x': 30.0}, 
		      94: {'y': -45.0, 'x': 0.0}, 95: {'y': -30.0, 'x': -30.0}, 
		      96: {'y': 0.0, 'x': -15.0}, 97: {'y': 0.0, 'x': 15.0} }
