#!/usr/bin/env python
from pax import pax

config_overload = """
[pax]
input = 'XED.XedInput'

dsp = ['SimpleDSP.BuildWaveforms',
       'SimpleDSP.S2Filter',
       'SimpleDSP.FindS2s',
       'SimpleDSP.SplitPeaks',
       'SimpleDSP.IdentifyPeaks',
       ]
transform = []

output = 'Plotting.PlottingWaveform'
#output = 'CSV.WritePeaksCSV'

[XED.XedInput]
filename = "xe100_120402_2000_000000.xed"
#filename = "xe100_120306_1132_000000.xed"

[SimpleDSP.BuildWaveforms]
baseline_samples_at_start_of_pulse = 46

[SimpleDSP.S2Filter]
gauss_filter_fwhm = 0.5 * us

[SimpleDSP.SplitPeaks]
min_p_v_ratio       = 2
min_p_v_distance    = 30
min_p_v_difference  = 0.5 #pe/bin

[SimpleDSP.FindS2s]
s2_threshold = 0.15  # pe/bin
"""

if __name__ == '__main__':
    pax.processor(config_overload)